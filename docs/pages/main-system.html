<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸšš ì‹¬í”Œ ë©”ì¸ ì‹œìŠ¤í…œ ì œì–´</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .back-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .control-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .status-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #28a745;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0.5rem 0.5rem 0.5rem 0;
            text-decoration: none;
        }

        .btn-primary { background: #667eea; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-warning { background: #ffc107; color: #212529; }
        .btn-danger { background: #dc3545; color: white; }
        .btn-secondary { background: #6c757d; color: white; }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: #2c3e50;
        }

        .form-group select,
        .form-group input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
        }

        .log-container {
            background: #1a1a1a;
            color: #00ff00;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            height: 300px;
            overflow-y: auto;
            margin-top: 1rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .stat-item {
            text-align: center;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-truck"></i> ì‹¬í”Œ ë©”ì¸ ì‹œìŠ¤í…œ ì œì–´</h1>
            <a href="../control-center.html" class="back-btn">
                <i class="fas fa-arrow-left"></i> ì œì–´ ì„¼í„°ë¡œ ëŒì•„ê°€ê¸°
            </a>
        </div>

        <div class="control-grid">
            <!-- ì‹œìŠ¤í…œ ìƒíƒœ -->
            <div class="control-card">
                <h2 class="card-title"><i class="fas fa-heartbeat"></i> ì‹œìŠ¤í…œ ìƒíƒœ</h2>
                
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <div>
                        <strong>ì‹œìŠ¤í…œ ì •ìƒ ì‹¤í–‰ì¤‘</strong><br>
                        <small>ë§ˆì§€ë§‰ ì‹¤í–‰: 2ë¶„ ì „</small>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value">2ì¼ 14ì‹œê°„</div>
                        <div class="stat-label">ì—°ì† ì‹¤í–‰</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">98.5%</div>
                        <div class="stat-label">ì„±ê³µë¥ </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">13ë¶„ í›„</div>
                        <div class="stat-label">ë‹¤ìŒ ì‹¤í–‰</div>
                    </div>
                </div>

                <button class="btn btn-success" onclick="startSystem()">
                    <i class="fas fa-play"></i> ì‹œìŠ¤í…œ ì‹œì‘
                </button>
                <button class="btn btn-warning" onclick="testRun()">
                    <i class="fas fa-vial"></i> í…ŒìŠ¤íŠ¸ ì‹¤í–‰
                </button>
                <button class="btn btn-danger" onclick="stopSystem()">
                    <i class="fas fa-stop"></i> ì‹œìŠ¤í…œ ì¤‘ì§€
                </button>
                <button class="btn btn-primary" onclick="restartSystem()">
                    <i class="fas fa-redo"></i> ì¬ì‹œì‘
                </button>
            </div>

            <!-- ì„¤ì • -->
            <div class="control-card">
                <h2 class="card-title"><i class="fas fa-cog"></i> ì‹œìŠ¤í…œ ì„¤ì •</h2>
                
                <div class="form-group">
                    <label>í…Œë§ˆ</label>
                    <select id="themeSelect">
                        <option value="ê¸°ë³¸ (íŒŒë‘)" selected>ê¸°ë³¸ (íŒŒë‘)</option>
                        <option value="ë‹¤í¬ ëª¨ë“œ">ë‹¤í¬ ëª¨ë“œ</option>
                        <option value="ë¼ì´íŠ¸ ëª¨ë“œ">ë¼ì´íŠ¸ ëª¨ë“œ</option>
                        <option value="ì‹¬í”Œ ë°°ë¯¼ í…Œë§ˆ">ì‹¬í”Œ ë°°ë¯¼ í…Œë§ˆ</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>ì‹¤í–‰ ì£¼ê¸°</label>
                    <select id="execution-interval">
                        <option value="15">15ë¶„</option>
                        <option value="30" selected>30ë¶„</option>
                        <option value="60">1ì‹œê°„</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="notificationCheck" checked> ì„±ê³µì‹œ ì•Œë¦¼
                    </label>
                    <label>
                        <input type="checkbox" checked> ì˜¤ë¥˜ì‹œ ì•Œë¦¼
                    </label>
                    <label>
                        <input type="checkbox" id="autoStartCheck"> ìë™ ì‹œì‘
                    </label>
                    <label>
                        <input type="checkbox" id="debugCheck"> ë””ë²„ê·¸ ëª¨ë“œ
                    </label>
                </div>

                <button class="btn btn-primary save-config">
                    <i class="fas fa-save"></i> ì„¤ì • ì €ì¥
                </button>
                <button class="btn btn-secondary" onclick="resetSettings()">
                    <i class="fas fa-undo"></i> ê¸°ë³¸ê°’ ë³µì›
                </button>
            </div>
        </div>

        <!-- ì‹¤ì‹œê°„ ë¡œê·¸ -->
        <div class="control-card">
            <h2 class="card-title">
                <i class="fas fa-terminal"></i> ì‹¤ì‹œê°„ ë¡œê·¸
                <button class="btn btn-danger" onclick="clearLogs()" style="margin-left: auto; font-size: 0.9rem;">
                    <i class="fas fa-trash"></i> ë¡œê·¸ ì‚­ì œ
                </button>
                <button class="btn btn-secondary" onclick="exportLogs()" style="font-size: 0.9rem;">
                    <i class="fas fa-download"></i> ë‚´ë³´ë‚´ê¸°
                </button>
            </h2>
            <div class="log-container" id="logContainer">
                <!-- ë¡œê·¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <script>
        // ì‹¬í”Œ ë©”ì¸ ì‹œìŠ¤í…œ ì œì–´
        class MainSystemControl {
            constructor() {
                this.isRunning = false;
                this.config = this.loadConfig();
                this.init();
            }

            init() {
                this.applyConfig();
                this.setupEventListeners();
                this.updateStatus();
                console.log('ğŸ›ï¸ ì‹¬í”Œ ë©”ì¸ ì‹œìŠ¤í…œ ì œì–´ ì´ˆê¸°í™” ì™„ë£Œ');
            }

            loadConfig() {
                const saved = localStorage.getItem('mainSystemConfig');
                return saved ? JSON.parse(saved) : {
                    theme: 'default',
                    interval: 30,
                    notifications: true,
                    autoStart: false,
                    debugMode: false
                };
            }

            saveConfig() {
                localStorage.setItem('mainSystemConfig', JSON.stringify(this.config));
                this.showNotification('âœ… ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                this.applyConfig();
            }

            applyConfig() {
                // í…Œë§ˆ ì ìš©
                this.applyTheme(this.config.theme);
                
                // ì¸í„°í˜ì´ìŠ¤ ì—…ë°ì´íŠ¸
                const intervalSelect = document.querySelector('#execution-interval');
                const notificationCheck = document.querySelector('#execution-interval input[type="checkbox"]');
                const autoStartCheck = document.querySelector('#autoStartCheck');
                const debugCheck = document.querySelector('#debugCheck');

                if (intervalSelect) intervalSelect.value = this.config.interval;
                if (notificationCheck) notificationCheck.checked = this.config.notifications;
                if (autoStartCheck) autoStartCheck.checked = this.config.autoStart;
                if (debugCheck) debugCheck.checked = this.config.debugMode;
            }

            applyTheme(themeId) {
                const themes = {
                    'default': {
                        background: 'linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)',
                        cardBg: '#ffffff',
                        primary: '#667eea'
                    },
                    'dark': {
                        background: 'linear-gradient(135deg, #121212 0%, #1e1e1e 100%)',
                        cardBg: '#2d2d2d',
                        primary: '#bb86fc'
                    },
                    'light': {
                        background: 'linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%)',
                        cardBg: '#ffffff',
                        primary: '#2196f3'
                    },
                    'grider': {
                        background: 'linear-gradient(135deg, #ff6b35 0%, #f7931e 100%)',
                        cardBg: '#ffffff',
                        primary: '#ff6b35'
                    }
                };

                const theme = themes[themeId] || themes.default;
                document.body.style.background = theme.background;
                
                document.querySelectorAll('.control-card').forEach(card => {
                    card.style.background = theme.cardBg;
                });

                document.querySelectorAll('.btn-primary').forEach(btn => {
                    btn.style.background = theme.primary;
                });
            }

            setupEventListeners() {
                // ì„¤ì • ë³€ê²½ ì´ë²¤íŠ¸
                document.addEventListener('change', (e) => {
                    if (e.target.id === 'themeSelect') {
                        const themeMap = {
                            'ê¸°ë³¸ (íŒŒë‘)': 'default',
                            'ë‹¤í¬ ëª¨ë“œ': 'dark',
                            'ë¼ì´íŠ¸ ëª¨ë“œ': 'light',
                            'ì‹¬í”Œ ë°°ë¯¼ í…Œë§ˆ': 'grider'
                        };
                        this.config.theme = themeMap[e.target.value] || 'default';
                        this.applyTheme(this.config.theme);
                        this.showNotification(`ğŸ¨ í…Œë§ˆê°€ '${e.target.value}'ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!`, 'success');
                    } else if (e.target.id === 'execution-interval') {
                        this.config.interval = parseInt(e.target.value);
                        this.showNotification(`â° ì‹¤í–‰ ê°„ê²©ì´ ${e.target.value}ë¶„ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!`, 'info');
                    } else if (e.target.id === 'execution-interval input[type="checkbox"]') {
                        this.config.notifications = e.target.checked;
                        this.showNotification(`ğŸ”” ì•Œë¦¼ì´ ${e.target.checked ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}ë˜ì—ˆìŠµë‹ˆë‹¤!`, 'info');
                    } else if (e.target.id === 'autoStartCheck') {
                        this.config.autoStart = e.target.checked;
                    } else if (e.target.id === 'debugCheck') {
                        this.config.debugMode = e.target.checked;
                        this.showNotification(`ğŸ› ë””ë²„ê·¸ ëª¨ë“œê°€ ${e.target.checked ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}ë˜ì—ˆìŠµë‹ˆë‹¤!`, 'info');
                    }
                });

                // ì €ì¥ ë²„íŠ¼
                document.addEventListener('click', (e) => {
                    if (e.target.matches('.save-config')) {
                        this.saveConfig();
                    }
                });

                // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey && e.key === 's') {
                        e.preventDefault();
                        this.saveConfig();
                    }
                });
            }

            showNotification(message, type = 'info') {
                const existing = document.querySelector('.notification');
                if (existing) existing.remove();

                const notification = document.createElement('div');
                notification.className = 'notification';
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: ${type === 'success' ? '#d4edda' : type === 'error' ? '#f8d7da' : '#cce7ff'};
                    color: ${type === 'success' ? '#155724' : type === 'error' ? '#721c24' : '#004085'};
                    padding: 1rem 1.5rem;
                    border-radius: 8px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    z-index: 10000;
                    animation: slideIn 0.3s ease;
                `;
                
                notification.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span>${message}</span>
                        <button onclick="this.parentElement.parentElement.remove()" style="
                            background: none; border: none; font-size: 1.2rem; cursor: pointer; opacity: 0.7;
                        ">Ã—</button>
                    </div>
                `;

                document.body.appendChild(notification);

                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.remove();
                    }
                }, 3000);
            }

            // ê¸°ì¡´ í•¨ìˆ˜ë“¤ ìœ ì§€
            updateStatus() {
                document.getElementById('systemStatus').textContent = this.isRunning ? 'ì‹¤í–‰ì¤‘' : 'ì¤‘ì§€ë¨';
                document.getElementById('systemStatus').style.color = this.isRunning ? 'green' : 'red';
                
                // ì‹¤í–‰ ì‹œê°„ ì—…ë°ì´íŠ¸
                const now = new Date();
                document.getElementById('lastExecution').textContent = now.toLocaleTimeString('ko-KR');
                
                // ë‹¤ìŒ ì‹¤í–‰ ì˜ˆì • ì‹œê°„
                const nextExecution = new Date(now.getTime() + (this.config.interval * 60000));
                document.getElementById('nextExecution').textContent = nextExecution.toLocaleTimeString('ko-KR');
            }

            startSystem() {
                this.isRunning = true;
                this.updateStatus();
                this.showNotification('ğŸš€ ì‹¬í”Œ ë©”ì¸ ì‹œìŠ¤í…œì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                
                // ì‹œë®¬ë ˆì´ì…˜ ë¡œê·¸
                this.addLog('ì‹œìŠ¤í…œ ì‹œì‘ë¨');
                this.addLog('ë°°ë¯¼ ë°ì´í„° ìˆ˜ì§‘ ì¤‘...');
                
                setTimeout(() => {
                    this.addLog('ë°ì´í„° ë¶„ì„ ì™„ë£Œ');
                    this.addLog('ì¹´ì¹´ì˜¤í†¡ ì•Œë¦¼ ì „ì†¡');
                }, 2000);
            }

            stopSystem() {
                this.isRunning = false;
                this.updateStatus();
                this.showNotification('â¹ï¸ ì‹¬í”Œ ë©”ì¸ ì‹œìŠ¤í…œì´ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤!', 'info');
                this.addLog('ì‹œìŠ¤í…œ ì¤‘ì§€ë¨');
            }

            restartSystem() {
                this.stopSystem();
                setTimeout(() => {
                    this.startSystem();
                }, 1000);
            }

            testRun() {
                this.showNotification('ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹¤í–‰ì„ ì‹œì‘í•©ë‹ˆë‹¤...', 'info');
                this.addLog('=== í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œì‘ ===');
                this.addLog('1. ë°°ë¯¼ API ì—°ê²° í…ŒìŠ¤íŠ¸... âœ…');
                this.addLog('2. ë°ì´í„° ìˆ˜ì§‘ í…ŒìŠ¤íŠ¸... âœ…');
                this.addLog('3. ì¹´ì¹´ì˜¤í†¡ ì—°ê²° í…ŒìŠ¤íŠ¸... âœ…');
                this.addLog('4. ì•Œë¦¼ ì „ì†¡ í…ŒìŠ¤íŠ¸... âœ…');
                this.addLog('=== ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ ===');
                
                setTimeout(() => {
                    this.showNotification('âœ… ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                }, 3000);
            }

            addLog(message) {
                const logContainer = document.getElementById('logContainer');
                const logEntry = document.createElement('div');
                logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
                logEntry.style.marginBottom = '5px';
                logContainer.appendChild(logEntry);
                logContainer.scrollTop = logContainer.scrollHeight;
            }

            clearLogs() {
                document.getElementById('logContainer').innerHTML = '';
                this.showNotification('ğŸ—‘ï¸ ë¡œê·¸ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
            }

            exportLogs() {
                const logs = document.getElementById('logContainer').textContent;
                const blob = new Blob([logs], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `main-system-logs-${new Date().toISOString().slice(0,10)}.txt`;
                a.click();
                
                URL.revokeObjectURL(url);
                this.showNotification('ğŸ“¥ ë¡œê·¸ê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            }
        }

        // CSS ì¶”ê°€
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
        `;
        document.head.appendChild(style);

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            window.mainControl = new MainSystemControl();
        });

        // ì „ì—­ í•¨ìˆ˜ë“¤ (ê¸°ì¡´ HTMLì—ì„œ ì‚¬ìš©)
        function startSystem() {
            window.mainControl.startSystem();
        }

        function stopSystem() {
            window.mainControl.stopSystem();
        }

        function restartSystem() {
            window.mainControl.restartSystem();
        }

        function testRun() {
            window.mainControl.testRun();
        }

        function clearLogs() {
            window.mainControl.clearLogs();
        }

        function exportLogs() {
            window.mainControl.exportLogs();
        }
    </script>
</body>
</html> 